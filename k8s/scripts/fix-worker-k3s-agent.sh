#!/bin/bash

# ì›Œì»¤ ë…¸ë“œ k3s-agent ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸

echo "ğŸ”§ ì›Œì»¤ ë…¸ë“œ k3s-agent ìˆ˜ì •"
echo "================================"
echo ""

echo "âš ï¸  ì›Œì»¤ ë…¸ë“œì—ì„œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤"
echo ""
echo "ë¬¸ì œ: node IP \"121.88.4.57\" not found"
echo "ì›ì¸: WSL2ì—ì„œëŠ” ê³µì¸ IPê°€ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì— ì§ì ‘ í• ë‹¹ë˜ì§€ ì•ŠìŒ"
echo ""
echo "í•´ê²° ë°©ë²•:"
echo "================================"
echo ""
echo "1. k3s-agent ì„œë¹„ìŠ¤ ì¤‘ì§€:"
echo "   sudo systemctl stop k3s-agent"
echo ""
echo "2. k3s-agent í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ í™•ì¸/ìˆ˜ì •:"
echo "   sudo cat /etc/systemd/system/k3s-agent.service.env"
echo ""
echo "   K3S_NODE_IPê°€ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´ ì œê±°:"
echo "   sudo sed -i '/K3S_NODE_IP/d' /etc/systemd/system/k3s-agent.service.env"
echo ""
echo "3. k3s-agent ì¬ì‹œì‘:"
echo "   sudo systemctl daemon-reload"
echo "   sudo systemctl start k3s-agent"
echo ""
echo "4. ìƒíƒœ í™•ì¸:"
echo "   sudo systemctl status k3s-agent"
echo "   kubectl get nodes -o wide"
echo ""
echo "================================"
echo "ë˜ëŠ” k3s-agent ì¬ì„¤ì¹˜:"
echo "================================"
echo ""
echo "1. k3s-agent ì œê±°:"
echo "   sudo systemctl stop k3s-agent"
echo "   sudo /usr/local/bin/k3s-agent-uninstall.sh"
echo ""
echo "2. ì¬ì„¤ì¹˜ (ë…¸ë“œ IP ìë™ ê°ì§€):"
echo "   export K3S_TOKEN=<í† í°>"
echo "   export K3S_URL=https://121.88.4.53:6443"
echo "   curl -sfL https://get.k3s.io | K3S_TOKEN=\$K3S_TOKEN K3S_URL=\$K3S_URL INSTALL_K3S_EXEC=\"--with-node-id --node-name bonanza-worker\" sh -"
echo ""
echo "   ğŸ’¡ --node-ip ì˜µì…˜ì„ ì œê±°í•˜ë©´ ìë™ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ IPë¥¼ ê°ì§€í•©ë‹ˆë‹¤"
echo ""

